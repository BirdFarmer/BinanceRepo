<Window x:Class="TradingAppDesktop.Views.SettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Settings" Height="480" Width="680" WindowStartupLocation="CenterOwner" ResizeMode="CanResize" MinWidth="520" MinHeight="360">
    <Border Background="{DynamicResource DarkBackground}" Padding="12">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Text="Settings" Foreground="{DynamicResource AccentColor}" FontSize="16" FontWeight="Bold"/>

            <Grid Grid.Row="1" Margin="0,12,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Left nav -->
                <StackPanel Grid.Column="0" Margin="0,0,12,0">
                    <TextBlock Text="Sections" Foreground="{DynamicResource PrimaryForeground}" FontWeight="SemiBold"/>
                    <ListBox x:Name="NavList" Margin="0,6,0,0" Height="280"/>
                </StackPanel>

                <!-- Right content area (scrollable) -->
                <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*" />
                            <ColumnDefinition Width="3*" />
                        </Grid.ColumnDefinitions>

                        <!-- Left column: Theme -->
                        <StackPanel x:Name="ThemePanel" Grid.Column="0" Margin="0,0,12,0">
                            <TextBlock Text="Theme" Foreground="{DynamicResource PrimaryForeground}" FontWeight="SemiBold"/>
                            <ListBox x:Name="ThemeList" Margin="0,6,0,0" Height="220" VerticalContentAlignment="Center"/>
                        </StackPanel>

                        <!-- Right column: Strategies / Harmonic -->
                        <StackPanel x:Name="StrategiesContent" Grid.Column="1">
                            <TextBlock Text="Strategies" Foreground="{DynamicResource PrimaryForeground}" FontWeight="SemiBold"/>
                            <ComboBox x:Name="StrategySelector" Margin="0,6,0,0" Width="320">
                                <ComboBoxItem Content="HarmonicPattern" />
                                <ComboBoxItem Content="OtherStrategy (disabled)" IsEnabled="False"/>
                                <ComboBoxItem Content="OtherStrategy2 (disabled)" IsEnabled="False"/>
                            </ComboBox>

                            <Border Margin="0,10,0,0" Padding="8" Background="{DynamicResource DarkPanelBackground}" CornerRadius="4">
                                <StackPanel x:Name="HarmonicPanel" Visibility="Collapsed">
                                    <TextBlock Text="Harmonic Patterns" FontWeight="SemiBold" Foreground="{DynamicResource PrimaryForeground}"/>
                                    <UniformGrid Columns="2" Margin="0,8,0,0">
                                        <CheckBox x:Name="ChkGartley" Content="Gartley" IsChecked="True"/>
                                        <CheckBox x:Name="ChkButterfly" Content="Butterfly" IsChecked="True"/>
                                        <CheckBox x:Name="ChkBat" Content="Bat" IsChecked="True"/>
                                        <CheckBox x:Name="ChkCrab" Content="Crab" IsChecked="True"/>
                                        <CheckBox x:Name="ChkCypher" Content="Cypher" IsChecked="True"/>
                                        <CheckBox x:Name="ChkShark" Content="Shark" IsChecked="True"/>
                                    </UniformGrid>

                                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0" VerticalAlignment="Center">
                                        <CheckBox x:Name="ChkUseTrendFilter" Content="Use Trend Filter (SMA)" IsChecked="False" VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0" VerticalAlignment="Center">
                                        <TextBlock Text="Validation bars:" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                        <TextBox x:Name="TxtValidationBars" Width="64" Text="3"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Placeholder area for other sections -->
                        <TextBlock x:Name="PlaceholderText" Grid.ColumnSpan="2" Visibility="Collapsed" Foreground="{DynamicResource PrimaryForeground}" TextWrapping="Wrap" Margin="0,12,0,0"/>
                    </Grid>
                </ScrollViewer>
            </Grid>

            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="CloseButton" Content="Close" Width="80" Margin="8" Click="CloseButton_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
